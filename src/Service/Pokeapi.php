<?php

namespace App\Service;

use MultipleIterator;
use Symfony\Contracts\Cache\CacheInterface;
use Symfony\Contracts\HttpClient\HttpClientInterface;
use Symfony\Contracts\Translation\TranslatorInterface;

class Pokeapi
{
    private array $map = [
        'bulbizarre'=>1,'bulbasaur'=>1,'herbizarre'=>2,'ivysaur'=>2,'florizarre'=>3,'venusaur'=>3,'salameche'=>4,'charmander'=>4,'reptincel'=>5,'charmeleon'=>5,'dracaufeu'=>6,'charizard'=>6,'carapuce'=>7,'squirtle'=>7,'carabaffe'=>8,'wartortle'=>8,'tortank'=>9,'blastoise'=>9,'chenipan'=>10,'caterpie'=>10,'chrysacier'=>11,'metapod'=>11,'papilusion'=>12,'butterfree'=>12,'aspicot'=>13,'weedle'=>13,'coconfort'=>14,'kakuna'=>14,'dardargnan'=>15,'beedrill'=>15,'roucool'=>16,'pidgey'=>16,'roucoups'=>17,'pidgeotto'=>17,'roucarnage'=>18,'pidgeot'=>18,'rattata'=>19,'rattatac'=>20,'raticate'=>20,'piafabec'=>21,'spearow'=>21,'rapasdepic'=>22,'fearow'=>22,'abo'=>23,'ekans'=>23,'arbok'=>24,'pikachu'=>25,'raichu'=>26,'sabelette'=>27,'sandshrew'=>27,'sablaireau'=>28,'sandslash'=>28,'nidoran-f'=>29,'nidorina'=>30,'nidoqueen'=>31,'nidoran-m'=>32,'nidorino'=>33,'nidoking'=>34,'melofee'=>35,'clefairy'=>35,'melodelfe'=>36,'clefable'=>36,'goupix'=>37,'vulpix'=>37,'feunard'=>38,'ninetales'=>38,'rondoudou'=>39,'jigglypuff'=>39,'grodoudou'=>40,'wigglytuff'=>40,'nosferapti'=>41,'zubat'=>41,'nosferalto'=>42,'golbat'=>42,'mystherbe'=>43,'oddish'=>43,'ortide'=>44,'gloom'=>44,'rafflesia'=>45,'vileplume'=>45,'paras'=>46,'parasect'=>47,'mimitoss'=>48,'venonat'=>48,'aeromite'=>49,'venomoth'=>49,'taupiqueur'=>50,'diglett'=>50,'triopikeur'=>51,'dugtrio'=>51,'miaouss'=>52,'meowth'=>52,'persian'=>53,'psykokwak'=>54,'psyduck'=>54,'akwakwak'=>55,'golduck'=>55,'ferosinge'=>56,'mankey'=>56,'colossinge'=>57,'primeape'=>57,'caninos'=>58,'growlithe'=>58,'arcanin'=>59,'arcanine'=>59,'ptitard'=>60,'poliwag'=>60,'tetarte'=>61,'poliwhirl'=>61,'tartard'=>62,'poliwrath'=>62,'abra'=>63,'kadabra'=>64,'alakazam'=>65,'machoc'=>66,'machop'=>66,'machopeur'=>67,'machoke'=>67,'mackogneur'=>68,'machamp'=>68,'chetiflor'=>69,'bellsprout'=>69,'boustiflor'=>70,'weepinbell'=>70,'empiflor'=>71,'victreebel'=>71,'tentacool'=>72,'tentacruel'=>73,'racaillou'=>74,'geodude'=>74,'gravalanch'=>75,'graveler'=>75,'grolem'=>76,'golem'=>76,'ponyta'=>77,'galopa'=>78,'rapidash'=>78,'ramoloss'=>79,'slowpoke'=>79,'flagadoss'=>80,'slowbro'=>80,'magneti'=>81,'magnemite'=>81,'magneton'=>82,'canarticho'=>83,'farfetchd'=>83,'doduo'=>84,'dodrio'=>85,'otaria'=>86,'seel'=>86,'lamantine'=>87,'dewgong'=>87,'tadmorv'=>88,'grimer'=>88,'grotadmorv'=>89,'muk'=>89,'kokiyas'=>90,'shellder'=>90,'crustabri'=>91,'cloyster'=>91,'fantominus'=>92,'gastly'=>92,'spectrum'=>93,'haunter'=>93,'ectoplasma'=>94,'gengar'=>94,'onix'=>95,'soporifik'=>96,'drowzee'=>96,'hypnomade'=>97,'hypno'=>97,'krabby'=>98,'krabboss'=>99,'kingler'=>99,'voltorbe'=>100,'voltorb'=>100,'electrode'=>101,'noeunoeuf'=>102,'exeggcute'=>102,'noadkoko'=>103,'exeggutor'=>103,'osselait'=>104,'cubone'=>104,'ossatueur'=>105,'marowak'=>105,'kicklee'=>106,'hitmonlee'=>106,'tygnon'=>107,'hitmonchan'=>107,'excelangue'=>108,'lickitung'=>108,'smogo'=>109,'koffing'=>109,'smogogo'=>110,'weezing'=>110,'rhinocorne'=>111,'rhyhorn'=>111,'rhinoferos'=>112,'rhydon'=>112,'leveinard'=>113,'chansey'=>113,'saquedeneu'=>114,'tangela'=>114,'kangourex'=>115,'kangaskhan'=>115,'hypotrempe'=>116,'horsea'=>116,'hypocean'=>117,'seadra'=>117,'poissirene'=>118,'goldeen'=>118,'poissoroy'=>119,'seaking'=>119,'stari'=>120,'staryu'=>120,'staross'=>121,'starmie'=>121,'m-mime'=>122,'mr-mime'=>122,'insecateur'=>123,'scyther'=>123,'lippoutou'=>124,'jynx'=>124,'elektek'=>125,'electabuzz'=>125,'magmar'=>126,'scarabrute'=>127,'pinsir'=>127,'tauros'=>128,'magicarpe'=>129,'magikarp'=>129,'leviator'=>130,'gyarados'=>130,'lokhlass'=>131,'lapras'=>131,'metamorph'=>132,'ditto'=>132,'evoli'=>133,'eevee'=>133,'aquali'=>134,'vaporeon'=>134,'voltali'=>135,'jolteon'=>135,'pyroli'=>136,'flareon'=>136,'porygon'=>137,'amonita'=>138,'omanyte'=>138,'amonistar'=>139,'omastar'=>139,'kabuto'=>140,'kabutops'=>141,'ptera'=>142,'aerodactyl'=>142,'ronflex'=>143,'snorlax'=>143,'artikodin'=>144,'articuno'=>144,'electhor'=>145,'zapdos'=>145,'sulfura'=>146,'moltres'=>146,'minidraco'=>147,'dratini'=>147,'draco'=>148,'dragonair'=>148,'dracolosse'=>149,'dragonite'=>149,'mewtwo'=>150,'mew'=>151,   
        'germignon'=>152,'chikorita'=>152,'macronium'=>153,'bayleef'=>153,'meganium'=>154,'hericendre'=>155,'cyndaquil'=>155,'feurisson'=>156,'quilava'=>156,'typhlosion'=>157,'kaiminus'=>158,'totodile'=>158,'crocrodil'=>159,'croconaw'=>159,'aligatueur'=>160,'feraligatr'=>160,'fouinette'=>161,'sentret'=>161,'fouinar'=>162,'furret'=>162,'hoothoot'=>163,'noarfang'=>164,'noctowl'=>164,'coxy'=>165,'ledyba'=>165,'coxyclaque'=>166,'ledian'=>166,'mimigal'=>167,'spinarak'=>167,'migalos'=>168,'ariados'=>168,'nostenfer'=>169,'crobat'=>169,'loupio'=>170,'chinchou'=>170,'lanturn'=>171,'pichu'=>172,'melo'=>173,'cleffa'=>173,'toudoudou'=>174,'igglybuff'=>174,'togepi'=>175,'togetic'=>176,'natu'=>177,'xatu'=>178,'wattouat'=>179,'mareep'=>179,'lainergie'=>180,'flaaffy'=>180,'pharamp'=>181,'ampharos'=>181,'joliflor'=>182,'bellossom'=>182,'marill'=>183,'azumarill'=>184,'simularbre'=>185,'sudowoodo'=>185,'tarpaud'=>186,'politoed'=>186,'granivol'=>187,'hoppip'=>187,'floravol'=>188,'skiploom'=>188,'cotovol'=>189,'jumpluff'=>189,'capumain'=>190,'aipom'=>190,'tournegrin'=>191,'sunkern'=>191,'heliatronc'=>192,'sunflora'=>192,'yanma'=>193,'axoloto'=>194,'wooper'=>194,'maraiste'=>195,'quagsire'=>195,'mentali'=>196,'espeon'=>196,'noctali'=>197,'umbreon'=>197,'cornebre'=>198,'murkrow'=>198,'roigada'=>199,'slowking'=>199,'feuforeve'=>200,'misdreavus'=>200,'zarbi'=>201,'unown'=>201,'qulbutoke'=>202,'wobbuffet'=>202,'girafarig'=>203,'pomdepik'=>204,'pineco'=>204,'foretress'=>205,'forretress'=>205,'insolourdo'=>206,'dunsparce'=>206,'scorplane'=>207,'gligar'=>207,'steelix'=>208,'snubbull'=>209,'granbull'=>210,'qwilfish'=>211,'cizayox'=>212,'scizor'=>212,'caratroc'=>213,'shuckle'=>213,'scarhino'=>214,'heracross'=>214,'farfuret'=>215,'sneasel'=>215,'teddiursa'=>216,'ursaring'=>217,'limagma'=>218,'slugma'=>218,'volcaropod'=>219,'magcargo'=>219,'marcarin'=>220,'swinub'=>220,'cochignon'=>221,'piloswine'=>221,'corayon'=>222,'corsola'=>222,'remoraid'=>223,'octillery'=>224,'cadoizo'=>225,'delibird'=>225,'demanta'=>226,'mantine'=>226,'airmure'=>227,'skarmory'=>227,'malosse'=>228,'houndour'=>228,'demolosse'=>229,'houndoom'=>229,'hyporoi'=>230,'kingdra'=>230,'phanpy'=>231,'donphan'=>232,'porygon2'=>233,'cerfrousse'=>234,'stantler'=>234,'queulorior'=>235,'smeargle'=>235,'debugant'=>236,'tyrogue'=>236,'kapoera'=>237,'hitmontop'=>237,'lippouti'=>238,'smoochum'=>238,'elekid'=>239,'magby'=>240,'ecremeuh'=>241,'miltank'=>241,'leuphorie'=>242,'blissey'=>242,'raikou'=>243,'entei'=>244,'suicune'=>245,'embrylex'=>246,'larvitar'=>246,'ymphect'=>247,'pupitar'=>247,'tyranocif'=>248,'tyranitar'=>248,'lugia'=>249,'ho-oh'=>250,'hooh'=>250,'celebi'=>251,
        'arcko'=>252,'treecko'=>252,'massko'=>253,'grovyle'=>253,'jungko'=>254,'sceptile'=>254,'poussifeu'=>255,'torchic'=>255,'galifeu'=>256,'combusken'=>256,'brasegali'=>257,'blaziken'=>257,'gobou'=>258,'mudkip'=>258,'flobio'=>259,'marshtomp'=>259,'laggron'=>260,'swampert'=>260,'medhyena'=>261,'poochyena'=>261,'grahyena'=>262,'mightyena'=>262,'zigzaton'=>263,'zigzagoon'=>263,'lineon'=>264,'linoone'=>264,'chenipotte'=>265,'wurmple'=>265,'armulys'=>266,'silcoon'=>266,'charmillon'=>267,'beautifly'=>267,'blindalys'=>268,'cascoon'=>268,'papinox'=>269,'dustox'=>269,'nenupiot'=>270,'lotad'=>270,'lombre'=>271,'ludicolo'=>272,'grainipiot'=>273,'seedot'=>273,'pifeuil'=>274,'nuzleaf'=>274,'tengalice'=>275,'shiftry'=>275,'nirondelle'=>276,'taillow'=>276,'heledelle'=>277,'swellow'=>277,'goelise'=>278,'wingull'=>278,'bekipan'=>279,'pelipper'=>279,'tarsal'=>280,'ralts'=>280,'kirlia'=>281,'gardevoir'=>282,'arakdo'=>283,'surskit'=>283,'maskadra'=>284,'masquerain'=>284,'balignon'=>285,'shroomish'=>285,'chapignon'=>286,'breloom'=>286,'parecool'=>287,'slakoth'=>287,'vigoroth'=>288,'monaflemit'=>289,'slaking'=>289,'ningale'=>290,'nincada'=>290,'ninjask'=>291,'munja'=>292,'shedinja'=>292,'chuchmur'=>293,'whismur'=>293,'ramboum'=>294,'loudred'=>294,'brouhabam'=>295,'exploud'=>295,'makuhita'=>296,'hariyama'=>297,'azurill'=>298,'tarinor'=>299,'nosepass'=>299,'skitty'=>300,'delcatty'=>301,'tenefix'=>302,'sableye'=>302,'mysdibule'=>303,'mawile'=>303,'galekid'=>304,'aron'=>304,'galegon'=>305,'lairon'=>305,'galeking'=>306,'aggron'=>306,'meditikka'=>307,'meditite'=>307,'charmina'=>308,'medicham'=>308,'dynavolt'=>309,'electrike'=>309,'elecsprint'=>310,'manectric'=>310,'posipi'=>311,'plusle'=>311,'negapi'=>312,'minun'=>312,'muciole'=>313,'volbeat'=>313,'lumivole'=>314,'illumise'=>314,'roselia'=>315,'gloupti'=>316,'gulpin'=>316,'avaltout'=>317,'swalot'=>317,'carvanha'=>318,'sharpedo'=>319,'wailmer'=>320,'wailord'=>321,'chamallot'=>322,'numel'=>322,'camerupt'=>323,'chartor'=>324,'torkoal'=>324,'spoink'=>325,'groret'=>326,'grumpig'=>326,'spinda'=>327,'kraknoix'=>328,'trapinch'=>328,'vibraninf'=>329,'vibrava'=>329,'libegon'=>330,'flygon'=>330,'cacnea'=>331,'cacturne'=>332,'tylton'=>333,'swablu'=>333,'altaria'=>334,'mangriff'=>335,'zangoose'=>335,'seviper'=>336,'seleroc'=>337,'lunatone'=>337,'solaroc'=>338,'solrock'=>338,'barloche'=>339,'barboach'=>339,'barbicha'=>340,'whiscash'=>340,'ecrapince'=>341,'corphish'=>341,'colhomard'=>342,'crawdaunt'=>342,'balbuto'=>343,'baltoy'=>343,'kaorine'=>344,'claydol'=>344,'lilia'=>345,'lileep'=>345,'vacilys'=>346,'cradily'=>346,'anorith'=>347,'armaldo'=>348,'barpau'=>349,'feebas'=>349,'milobellus'=>350,'milotic'=>350,'morpheo'=>351,'castform'=>351,'kecleon'=>352,'polichombr'=>353,'shuppet'=>353,'branette'=>354,'banette'=>354,'skelenox'=>355,'duskull'=>355,'teraclope'=>356,'dusclops'=>356,'tropius'=>357,'eoko'=>358,'chimecho'=>358,'absol'=>359,'okeoke'=>360,'wynaut'=>360,'stalgamin'=>361,'snorunt'=>361,'oniglali'=>362,'glalie'=>362,'obalie'=>363,'spheal'=>363,'phogleur'=>364,'sealeo'=>364,'kaimorse'=>365,'walrein'=>365,'coquiperl'=>366,'clamperl'=>366,'serpang'=>367,'huntail'=>367,'rosabyss'=>368,'gorebyss'=>368,'relicanth'=>369,'lovdisc'=>370,'luvdisc'=>370,'draby'=>371,'bagon'=>371,'drackauss'=>372,'shelgon'=>372,'drattak'=>373,'salamence'=>373,'terhal'=>374,'beldum'=>374,'metang'=>375,'metalosse'=>376,'metagross'=>376,'regirock'=>377,'regice'=>378,'registeel'=>379,'latias'=>380,'latios'=>381,'kyogre'=>382,'groudon'=>383,'rayquaza'=>384,'jirachi'=>385,'deoxys'=>386,
        'tortipouss'=>387,'turtwig'=>387,'boskara'=>388,'grotle'=>388,'torterra'=>389,'ouisticram'=>390,'chimchar'=>390,'chimpenfeu'=>391,'monferno'=>391,'simiabraz'=>392,'infernape'=>392,'tiplouf'=>393,'piplup'=>393,'prinplouf'=>394,'prinplup'=>394,'pingoleon'=>395,'empoleon'=>395,'etourmi'=>396,'starly'=>396,'etourvol'=>397,'staravia'=>397,'etouraptor'=>398,'staraptor'=>398,'keunotor'=>399,'bidoof'=>399,'castorno'=>400,'bibarel'=>400,'crikzik'=>401,'kricketot'=>401,'melokrik'=>402,'kricketune'=>402,'lixy'=>403,'shinx'=>403,'luxio'=>404,'luxray'=>405,'rozbouton'=>406,'budew'=>406,'roserade'=>407,'kranidos'=>408,'cranidos'=>408,'charkos'=>409,'rampardos'=>409,'dinoclier'=>410,'shieldon'=>410,'bastiodon'=>411,'cheniti'=>412,'burmy'=>412,'cheniselle'=>413,'wormadam'=>413,'papilord'=>414,'mothim'=>414,'apitrini'=>415,'combee'=>415,'apireine'=>416,'vespiquen'=>416,'pachirisu'=>417,'mustebouee'=>418,'buizel'=>418,'musteflott'=>419,'floatzel'=>419,'ceribou'=>420,'cherubi'=>420,'ceriflor'=>421,'cherrim'=>421,'sancoki'=>422,'shellos'=>422,'tritosor'=>423,'gastrodon'=>423,'capidextre'=>424,'ambipom'=>424,'baudrive'=>425,'drifloon'=>425,'grodrive'=>426,'drifblim'=>426,'laporeille'=>427,'buneary'=>427,'lockpin'=>428,'lopunny'=>428,'magireve'=>429,'mismagius'=>429,'corboss'=>430,'honchkrow'=>430,'chaglam'=>431,'glameow'=>431,'chaffreux'=>432,'purugly'=>432,'korillon'=>433,'chingling'=>433,'moufouette'=>434,'skunky'=>434,'moufflair'=>435,'stuntank'=>435,'archeomire'=>436,'bronzor'=>436,'archeodong'=>437,'bronzong'=>437,'manzai'=>438,'bonsly'=>438,'mimejr'=>439,'ptiravi'=>440,'happiny'=>440,'pijako'=>441,'chatot'=>441,'spiritomb'=>442,'griknot'=>443,'gible'=>443,'carmache'=>444,'gabite'=>444,'carchacrok'=>445,'garchomp'=>445,'goinfrex'=>446,'munchlax'=>446,'riolu'=>447,'lucario'=>448,'hippopotas'=>449,'hippodocus'=>450,'hippowdon'=>450,'rapion'=>451,'skorupi'=>451,'drascore'=>452,'drapion'=>452,'cradopaud'=>453,'croagunk'=>453,'coatox'=>454,'toxicroak'=>454,'vortente'=>455,'carnivine'=>455,'ecayon'=>456,'finneon'=>456,'lumineon'=>457,'babimanta'=>458,'mantyke'=>458,'blizzi'=>459,'snover'=>459,'blizzaroi'=>460,'abomasnow'=>460,'dimoret'=>461,'weavile'=>461,'magnezone'=>462,'coudlangue'=>463,'lickilicky'=>463,'rhinastoc'=>464,'rhyperior'=>464,'bouldeneu'=>465,'tangrowth'=>465,'elekable'=>466,'electivire'=>466,'maganon'=>467,'magmortar'=>467,'togekiss'=>468,'yanmega'=>469,'phyllali'=>470,'leafeon'=>470,'givrali'=>471,'glaceon'=>471,'scorvol'=>472,'gliscor'=>472,'mammochon'=>473,'mamoswine'=>473,'porygon-z'=>474,'gallame'=>475,'gallade'=>475,'tarinorme'=>476,'probopass'=>476,'noctunoir'=>477,'dusknoir'=>477,'momartik'=>478,'froslass'=>478,'motisma'=>479,'rotom'=>479,'crehelf'=>480,'uxie'=>480,'crefollet'=>481,'mesprit'=>481,'crefadet'=>482,'azelf'=>482,'dialga'=>483,'palkia'=>484,'heatran'=>485,'regigigas'=>486,'giratina'=>487,'cresselia'=>488,'phione'=>489,'manaphy'=>490,'darkrai'=>491,'shaymin'=>492,'arceus'=>493,
        'victini'=>494,'vipelierre'=>495,'snivy'=>495,'lianaja'=>496,'servine'=>496,'majaspic'=>497,'serperior'=>497,'gruikui'=>498,'tepig'=>498,'grotichon'=>499,'pignite'=>499,'roitiflam'=>500,'emboar'=>500,'moustillon'=>501,'oshawott'=>501,'mateloutre'=>502,'dewott'=>502,'clamiral'=>503,'samurott'=>503,'ratentif'=>504,'patrat'=>504,'miradar'=>505,'watchog'=>505,'ponchiot'=>506,'lillipup'=>506,'ponchien'=>507,'herdier'=>507,'mastouffe'=>508,'stoutland'=>508,'chacripan'=>509,'purrloin'=>509,'leopardus'=>510,'liepard'=>510,'feuillajou'=>511,'pansage'=>511,'feuilloutan'=>512,'simisage'=>512,'flamajou'=>513,'pansear'=>513,'flamoutan'=>514,'simisear'=>514,'flotajou'=>515,'panpour'=>515,'flotoutan'=>516,'simipour'=>516,'munna'=>517,'mushana'=>518,'musharna'=>518,'poichigeon'=>519,'pidove'=>519,'colombeau'=>520,'tranquill'=>520,'deflaisan'=>521,'unfezant'=>521,'zebibron'=>522,'blitzle'=>522,'zeblitz'=>523,'zebstrika'=>523,'nodulithe'=>524,'roggenrola'=>524,'geolithe'=>525,'boldore'=>525,'gigalithe'=>526,'gigalith'=>526,'chovsourir'=>527,'woobat'=>527,'rhinolove'=>528,'swoobat'=>528,'rototaupe'=>529,'drilbur'=>529,'minotaupe'=>530,'excadrill'=>530,'nanmeouie'=>531,'audino'=>531,'charpenti'=>532,'timburr'=>532,'ouvrier'=>533,'gurdurr'=>533,'betochef'=>534,'conkeldurr'=>534,'tritonde'=>535,'tympole'=>535,'batracne'=>536,'palpitoad'=>536,'crapustule'=>537,'seismitoad'=>537,'judokrak'=>538,'throh'=>538,'karaclee'=>539,'sawk'=>539,'larveyette'=>540,'sewaddle'=>540,'couverdure'=>541,'swadloon'=>541,'manternel'=>542,'leavanny'=>542,'venipatte'=>543,'venipede'=>543,'scobolide'=>544,'whirlipede'=>544,'brutapode'=>545,'scolipede'=>545,'doudouvet'=>546,'cottonee'=>546,'farfaduvet'=>547,'whimsicott'=>547,'chlorobule'=>548,'petilil'=>548,'fragilady'=>549,'lilligant'=>549,'bargantua'=>550,'basculin'=>550,'mascaiman'=>551,'sandile'=>551,'escroco'=>552,'krokorok'=>552,'crocorible'=>553,'krookodile'=>553,'darumarond'=>554,'darumaka'=>554,'darumacho'=>555,'darmanitan'=>555,'maracachi'=>556,'maractus'=>556,'crabicoque'=>557,'dwebble'=>557,'crabaraque'=>558,'crustle'=>558,'baggiguane'=>559,'scraggy'=>559,'baggaid'=>560,'scrafty'=>560,'cryptero'=>561,'sigilyph'=>561,'tutafeh'=>562,'yamask'=>562,'tutankafer'=>563,'cofagrigus'=>563,'carapagos'=>564,'tirtouga'=>564,'megapagos'=>565,'carracosta'=>565,'arkeapti'=>566,'archen'=>566,'aeropteryx'=>567,'archeops'=>567,'miamiasme'=>568,'trubbish'=>568,'miasmax'=>569,'garbodor'=>569,'zorua'=>570,'zoroark'=>571,'chinchidou'=>572,'minccino'=>572,'pashmilla'=>573,'cinccino'=>573,'scrutella'=>574,'gothita'=>574,'mesmerella'=>575,'gothorita'=>575,'siderella'=>576,'gothitelle'=>576,'nucleos'=>577,'solosis'=>577,'meios'=>578,'duosion'=>578,'symbios'=>579,'reuniclus'=>579,'couaneton'=>580,'ducklett'=>580,'lakmecygne'=>581,'swanna'=>581,'sorbebe'=>582,'vanillite'=>582,'sorboul'=>583,'vanillish'=>583,'sorbouboul'=>584,'vanilluxe'=>584,'vivaldaim'=>585,'deerling'=>585,'haydaim'=>586,'sawsbuck'=>586,'emolga'=>587,'carabing'=>588,'karrablast'=>588,'lancargot'=>589,'escavalier'=>589,'trompignon'=>590,'foongus'=>590,'gaulet'=>591,'amoonguss'=>591,'viskuse'=>592,'frillish'=>592,'moyade'=>593,'jellicent'=>593,'mamanbo'=>594,'alomomola'=>594,'statitik'=>595,'joltik'=>595,'mygavolt'=>596,'galvantula'=>596,'grindur'=>597,'ferroseed'=>597,'noacier'=>598,'ferrothorn'=>598,'tic'=>599,'klink'=>599,'clic'=>600,'klang'=>600,'cliticlic'=>601,'klinklang'=>601,'anchwatt'=>602,'tynamo'=>602,'lamperoie'=>603,'eelektrik'=>603,'ohmassacre'=>604,'eelektross'=>604,'lewsor'=>605,'elgyem'=>605,'neitram'=>606,'beheeyem'=>606,'funecire'=>607,'litwick'=>607,'melancolux'=>608,'lampent'=>608,'lugulabre'=>609,'chandelure'=>609,'coupenotte'=>610,'axew'=>610,'incisache'=>611,'fraxure'=>611,'tranchodon'=>612,'haxorus'=>612,'polarhume'=>613,'cubchoo'=>613,'polagriffe'=>614,'beartic'=>614,'hexagel'=>615,'cryogonal'=>615,'escargaume'=>616,'shelmet'=>616,'limaspeed'=>617,'accelgor'=>617,'limonde'=>618,'stunfisk'=>618,'kungfouine'=>619,'mienfoo'=>619,'shaofouine'=>620,'mienshao'=>620,'drakkarmin'=>621,'druddigon'=>621,'gringolem'=>622,'golett'=>622,'golemastoc'=>623,'golurk'=>623,'scalpion'=>624,'pawniard'=>624,'scalproie'=>625,'bisharp'=>625,'frison'=>626,'bouffalant'=>626,'furaiglon'=>627,'rufflet'=>627,'guerriaigle'=>628,'braviary'=>628,'vostourno'=>629,'vullaby'=>629,'vaututrice'=>630,'mandibuzz'=>630,'aflamanoir'=>631,'heatmor'=>631,'fermite'=>632,'durant'=>632,'solochi'=>633,'deino'=>633,'diamat'=>634,'zweilous'=>634,'trioxhydre'=>635,'hydreigon'=>635,'pyronille'=>636,'larvesta'=>636,'pyrax'=>637,'volcarona'=>637,'cobaltium'=>638,'cobalion'=>638,'terrakium'=>639,'terrakion'=>639,'viridium'=>640,'virizion'=>640,'boreas'=>641,'tornadus'=>641,'fulguris'=>642,'thundurus'=>642,'reshiram'=>643,'zekrom'=>644,'demeteros'=>645,'landorus'=>645,'kyurem'=>646,'keldeo'=>647,'meloetta'=>648,'genesect'=>649,
        'marisson'=>650,'chespin'=>650,'boguerisse'=>651,'quilladin'=>651,'blindepique'=>652,'chesnaught'=>652,'feunnec'=>653,'fennekin'=>653,'roussil'=>654,'braixen'=>654,'goupelin'=>655,'delphox'=>655,'grenousse'=>656,'froakie'=>656,'croaporal'=>657,'frogadier'=>657,'amphinobi'=>658,'greninja'=>658,'sapereau'=>659,'bunnelby'=>659,'excavarenne'=>660,'diggersby'=>660,'passerouge'=>661,'fletchling'=>661,'braisillon'=>662,'fletchinder'=>662,'flambusard'=>663,'talonflame'=>663,'lepidonille'=>664,'scatterbug'=>664,'peregrain'=>665,'spewpa'=>665,'prismillon'=>666,'vivillon'=>666,'helionceau'=>667,'litleo'=>667,'nemelios'=>668,'pyroar'=>668,'flabebe'=>669,'floette'=>670,'florges'=>671,'cabriolaine'=>672,'skiddo'=>672,'chevroum'=>673,'gogoat'=>673,'pandespiegle'=>674,'pancham'=>674,'pandarbare'=>675,'pangoro'=>675,'couafarel'=>676,'furfrou'=>676,'espurr'=>677,'psystigri'=>678,'meowstic'=>678,'monorpale'=>679,'honedge'=>679,'dimocles'=>680,'doublade'=>680,'exagide'=>681,'aegislash'=>681,'fluvetin'=>682,'spritzee'=>682,'cocotine'=>683,'aromatisse'=>683,'sucroquin'=>684,'swirlix'=>684,'cupcanaille'=>685,'slurpuff'=>685,'septerion'=>686,'inkay'=>686,'sepiatroce'=>687,'malamar'=>687,'opermine'=>688,'binacle'=>688,'golgopathe'=>689,'barbaracle'=>689,'venalgue'=>690,'skrelp'=>690,'kravarech'=>691,'dragalge'=>691,'flingouste'=>692,'clauncher'=>692,'gamblast'=>693,'clawitzer'=>693,'galvaran'=>694,'helioptile'=>694,'iguolta'=>695,'heliolisk'=>695,'ptyranidur'=>696,'tyrunt'=>696,'rexillius'=>697,'tyrantrum'=>697,'amagara'=>698,'amaura'=>698,'dragmara'=>699,'aurorus'=>699,'nymphali'=>700,'sylveon'=>700,'brutalibre'=>701,'hawlucha'=>701,'dedenne'=>702,'strassie'=>703,'carbink'=>703,'mucuscule'=>704,'goomy'=>704,'colimucus'=>705,'sliggoo'=>705,'muplodocus'=>706,'goodra'=>706,'trousselin'=>707,'klefki'=>707,'brocelome'=>708,'phantump'=>708,'desseliande'=>709,'trevenant'=>709,'pitrouille'=>710,'pumpkaboo'=>710,'banshitrouye'=>711,'gourgeist'=>711,'grelaçon'=>712,'bergmite'=>712,'seracrawl'=>713,'avalugg'=>713,'sonistrelle'=>714,'noibat'=>714,'bruverne'=>715,'noivern'=>715,'xerneas'=>716,'yveltal'=>717,'zygarde'=>718,'diancie'=>719,'hoopa'=>720,'volcanion'=>721,
        'brindibou'=>722,'rowlet'=>722,'effleche'=>723,'dartrix'=>723,'archeduc'=>724,'decidueye'=>724,'flamiaou'=>725,'litten'=>725,'matoufeu'=>726,'torracat'=>726,'felinferno'=>727,'incineroar'=>727,'otaquin'=>728,'popplio'=>728,'otarlette'=>729,'brionne'=>729,'oratoria'=>730,'primarina'=>730,'picassaut'=>731,'pikipek'=>731,'piclairon'=>732,'trumbeak'=>732,'bazoucan'=>733,'toucannon'=>733,'manglouton'=>734,'yungoos'=>734,'argouste'=>735,'gumshoos'=>735,'larvibule'=>736,'grubbin'=>736,'chrysapile'=>737,'charjabug'=>737,'lucanon'=>738,'vikavolt'=>738,'crabagarre'=>739,'crabrawler'=>739,'crabominable'=>740,'plumeline'=>741,'oricorio'=>741,'bombydou'=>742,'cutiefly'=>742,'rubombelle'=>743,'ribombee'=>743,'rocabot'=>744,'rockruff'=>744,'lougaroc'=>745,'lycanroc'=>745,'froussardine'=>746,'wishiwashi'=>746,'vorasterie'=>747,'mareanie'=>747,'predasterie'=>748,'toxapex'=>748,'tiboudet'=>749,'mudbray'=>749,'bourrinos'=>750,'mudsdale'=>750,'araqua'=>751,'dewpider'=>751,'tarenbulle'=>752,'araquanid'=>752,'mimantis'=>753,'fomantis'=>753,'floramantis'=>754,'lurantis'=>754,'spododo'=>755,'morelull'=>755,'lampignon'=>756,'shiinotic'=>756,'tritox'=>757,'salandit'=>757,'malamandre'=>758,'salazzle'=>758,'nounourson'=>759,'stufful'=>759,'chelours'=>760,'bewear'=>760,'croquine'=>761,'bounsweet'=>761,'candine'=>762,'steenee'=>762,'sucreine'=>763,'tsareena'=>763,'guerilande'=>764,'comfey'=>764,'gouroutan'=>765,'oranguru'=>765,'quartermac'=>766,'passimian'=>766,'sovkipou'=>767,'wimpod'=>767,'sarmurai'=>768,'golisopod'=>768,'bacabouh'=>769,'sandygast'=>769,'trepassable'=>770,'palossand'=>770,'concombaffe'=>771,'pyukumuku'=>771,'type0'=>772,'type-null'=>772,'silvallie'=>773,'silvally'=>773,'meteno'=>774,'minior'=>774,'dodoala'=>775,'komala'=>775,'boumata'=>776,'turtonator'=>776,'togedemaru'=>777,'mimiqui'=>778,'mimikyu'=>778,'denticrisse'=>779,'bruxish'=>779,'draieul'=>780,'drampa'=>780,'sinistrail'=>781,'dhelmise'=>781,'bebecaille'=>782,'jangmo-o'=>782,'ecaid'=>783,'hakamo-o'=>783,'ekaiser'=>784,'kommo-o'=>784,'tokorico'=>785,'tapukoko'=>785,'tokopiyon'=>786,'tapulele'=>786,'tokotorap'=>787,'tapubulu'=>787,'tokopisco'=>788,'tapufini'=>788,'cosmog'=>789,'cosmovum'=>790,'cosmoem'=>790,'solgaleo'=>791,'lunala'=>792,'zeroid'=>793,'nihilego'=>793,'mouscoto'=>794,'buzzwole'=>794,'cancrelove'=>795,'pheromosa'=>795,'cablifere'=>796,'xurkitree'=>796,'bamboiselle'=>797,'celesteela'=>797,'katagami'=>798,'kartana'=>798,'engloutyran'=>799,'guzzlord'=>799,'necrozma'=>800,'magearna'=>801,'marshadow'=>802,'vemini'=>803,'poipole'=>803,'mandrillon'=>804,'naganadel'=>804,'ama-ama'=>805,'stakataka'=>805,'pierroteknik'=>806,'blacephalon'=>806,'zeraora'=>807,'meltan'=>808,'melmetal'=>809,
        'ouistempo'=>810,'grookey'=>810,'badabouin'=>811,'thwackey'=>811,'gorythmic'=>812,'rillaboom'=>812,'flambino'=>813,'scorbunny'=>813,'lapyro'=>814,'raboot'=>814,'pyrobut'=>815,'cinderace'=>815,'larmeleon'=>816,'sobble'=>816,'arrozard'=>817,'drizzile'=>817,'lezargus'=>818,'inteleon'=>818,'rongourmand'=>819,'skwovet'=>819,'rongrigou'=>820,'greedent'=>820,'minisange'=>821,'rookidee'=>821,'bleuseille'=>822,'corvisquire'=>822,'corvaillus'=>823,'corviknight'=>823,'larvadar'=>824,'blipbug'=>824,'coleodome'=>825,'dottler'=>825,'astronelle'=>826,'orbeetle'=>826,'goupilou'=>827,'nickit'=>827,'roublenard'=>828,'thievul'=>828,'tournicoton'=>829,'gossifleur'=>829,'blancoton'=>830,'eldegoss'=>830,'moumouton'=>831,'wooloo'=>831,'moumouflon'=>832,'dubwool'=>832,'khelocrok'=>833,'chewtle'=>833,'torgamord'=>834,'drednaw'=>834,'voltoutou'=>835,'yamper'=>835,'fulgudog'=>836,'boltund'=>836,'charbi'=>837,'rolycoly'=>837,'wagomine'=>838,'carkol'=>838,'monthracite'=>839,'coalossal'=>839,'verpom'=>840,'applin'=>840,'pomdrapi'=>841,'flapple'=>841,'dratatin'=>842,'appletun'=>842,'dunaja'=>843,'silicobra'=>843,'dunaconda'=>844,'sandaconda'=>844,'nigosier'=>845,'cramorant'=>845,'embrochet'=>846,'arrokuda'=>846,'hastacuda'=>847,'barraskewda'=>847,'toxizap'=>848,'toxel'=>848,'salarsen'=>849,'toxtricity'=>849,'grillepattes'=>850,'sizzlipede'=>850,'scolocendre'=>851,'centiskorch'=>851,'poulpaf'=>852,'clobbopus'=>852,'krakos'=>853,'grapploct'=>853,'theffroi'=>854,'sinistea'=>854,'polthegeist'=>855,'polteageist'=>855,'bibichut'=>856,'hatenna'=>856,'chapotus'=>857,'hattrem'=>857,'sorcilence'=>858,'hatterene'=>858,'grimalin'=>859,'impidimp'=>859,'fourbelin'=>860,'morgrem'=>860,'angoliath'=>861,'grimmsnarl'=>861,'ixon'=>862,'obstagoon'=>862,'berserkatt'=>863,'perrserker'=>863,'corayome'=>864,'cursola'=>864,'palarticho'=>865,'sirfetchd'=>865,'m.glaquette'=>866,'mr-rime'=>866,'tutetekri'=>867,'runerigus'=>867,'cremy'=>868,'milcery'=>868,'charmilly'=>869,'alcremie'=>869,'hexadron'=>870,'falinks'=>870,'wattapik'=>871,'pincurchin'=>871,'frissonille'=>872,'snom'=>872,'beldeneige'=>873,'frosmoth'=>873,'dolman'=>874,'stonjourner'=>874,'bekaglaçon'=>875,'eiscue'=>875,'wimessir'=>876,'indeedee'=>876,'morpeko'=>877,'charibari'=>878,'cufant'=>878,'pachyradjah'=>879,'copperajah'=>879,'galvagon'=>880,'dracozolt'=>880,'galvagla'=>881,'arctozolt'=>881,'hydragon'=>882,'dracovish'=>882,'hydragla'=>883,'arctovish'=>883,'duralugon'=>884,'duraludon'=>884,'fantyrm'=>885,'dreepy'=>885,'dispareptil'=>886,'drakloak'=>886,'lanssorien'=>887,'dragapult'=>887,'zacian'=>888,'zamazenta'=>889,'ethernatos'=>890,'eternatus'=>890,'wushours'=>891,'kubfu'=>891,'shifours'=>892,'urshifu'=>892,'zarude'=>893,'regieleki'=>894,'regidrago'=>895,'blizzeval'=>896,'glastrier'=>896,'spectreval'=>897,'spectrier'=>897,'sylveroy'=>898,'calyrex'=>898,'cerbyllin'=>899,'wyrdeer'=>899,'hachecateur'=>900,'kleavor'=>900,'ursaking'=>901,'ursaluna'=>901,'paragruel'=>902,'basculegion'=>902,'farfurex'=>903,'sneasler'=>903,'qwilpik'=>904,'overqwil'=>904,'amovenus'=>905,'enamorus'=>905,
        'poussacha'=>906,'sprigatito'=>906,'matourgeon'=>907,'floragato'=>907,'miascarade'=>908,'meowscarada'=>908,'chocodile'=>909,'fuecoco'=>909,'crocogril'=>910,'crocalor'=>910,'flamigator'=>911,'skeledirge'=>911,'coiffeton'=>912,'quaxly'=>912,'canarbello'=>913,'quaxwell'=>913,'palmaval'=>914,'quaquaval'=>914,'gourmelet'=>915,'lechonk'=>915,'fragroin'=>916,'oinkologne'=>916,'tissenboule'=>917,'tarountula'=>917,'filentrappe'=>918,'spidops'=>918,'lilliterelle'=>919,'nymble'=>919,'gambex'=>920,'lokix'=>920,'pohm'=>921,'pawmi'=>921,'pohmotte'=>922,'pawmo'=>922,'pohmarmotte'=>923,'pawmot'=>923,'compagnol'=>924,'tandemaus'=>924,'famignol'=>925,'maushold'=>925,'patachiot'=>926,'fidough'=>926,'briochien'=>927,'dachsbun'=>927,'olivini'=>928,'smoliv'=>928,'olivado'=>929,'dolliv'=>929,'arboliva'=>930,'tapatoes'=>931,'squawkabilly'=>931,'selutin'=>932,'nacli'=>932,'amassel'=>933,'naclstack'=>933,'gigansel'=>934,'garganacl'=>934,'charbambin'=>935,'charcadet'=>935,'carmadura'=>936,'armarouge'=>936,'malvalame'=>937,'ceruledge'=>937,'têtampoule'=>938,'tadbulb'=>938,'ampibidou'=>939,'bellibolt'=>939,'zapetrel'=>940,'wattrel'=>940,'fulgulairo'=>941,'kilowattrel'=>941,'grondogue'=>942,'maschiff'=>942,'dogrino'=>943,'mabosstiff'=>943,'gribouraigne'=>944,'shroodle'=>944,'tag-tag'=>945,'grafaiai'=>945,'virovent'=>946,'bramblin'=>946,'virevorreur'=>947,'brambleghast'=>947,'terracool'=>948,'toedscool'=>948,'terracruel'=>949,'toedscruel'=>949,'craparoi'=>950,'klawf'=>950,'pimito'=>951,'capsakid'=>951,'scovilain'=>952,'scovillain'=>952,'leboulerou'=>953,'rellor'=>953,'berasca'=>954,'rabsca'=>954,'flotillon'=>955,'flittle'=>955,'cleopsytra'=>956,'espathra'=>956,'forgerette'=>957,'tinkatink'=>957,'forgella'=>958,'tinkatuff'=>958,'forgelina'=>959,'tinkaton'=>959,'taupikeau'=>960,'wiglett'=>960,'triopikeau'=>961,'wugtrio'=>961,'lestombaile'=>962,'bombirdier'=>962,'dofin'=>963,'finizen'=>963,'superdofin'=>964,'palafin'=>964,'vrombi'=>965,'varoom'=>965,'vrombotor'=>966,'revavroom'=>966,'motorizard'=>967,'cyclizar'=>967,'ferdeter'=>968,'orthworm'=>968,'germeclat'=>969,'glimmet'=>969,'floreclat'=>970,'glimmora'=>970,'toutombe'=>971,'greavard'=>971,'tomberro'=>972,'houndstone'=>972,'flamenroule'=>973,'flamigo'=>973,'Pietace'=>974,'cetoddle'=>974,'balbaleze'=>975,'cetitan'=>975,'delestin'=>976,'veluza'=>976,'oyacata'=>977,'dondozo'=>977,'nigirigon'=>978,'tatsugiri'=>978,'courrousinge'=>979,'annihilape'=>979,'terraiste'=>980,'clodsire'=>980,'farigiraf'=>981,'deusolourdo'=>982,'dudunsparce'=>982,'scalpereur'=>983,'kingambit'=>983,'fortivoire'=>984,'greattusk'=>984,'hurlequeue'=>985,'screamtail'=>985,'fongusfurie'=>986,'brutebonnet'=>986,'flottemeche'=>987,'fluttermane'=>987,'rampeailes'=>988,'slitherwing'=>988,'pelagesable'=>989,'sandyshocks'=>989,'rouedefer'=>990,'irontreads'=>990,'hottedefer'=>991,'ironbundle'=>991,'paumedefer'=>992,'ironhands'=>992,'tetesdefer'=>993,'ironjugulis'=>993,'mitedefer'=>994,'ironmoth'=>994,'epinedefer'=>995,'ironthorns'=>995,'frigodo'=>996,'frigibax'=>996,'cryodo'=>997,'arctibax'=>997,'glaivodo'=>998,'baxcalibur'=>998,'mordudor'=>999,'gimmighoul'=>999,'gromago'=>1000,'gholdengo'=>1000,'chongjian'=>1001,'wo-chien'=>1001,'baojian'=>1002,'chien-pao'=>1002,'dinglu'=>1003,'ting-lu'=>1003,'yuyu'=>1004,'chi-yu'=>1004,'rugitlune'=>1005,'roaringmoon'=>1005,'gardedefer'=>1006,'ironvaliant'=>1006,'koraidon'=>1007,'miraidon'=>1008,'serpenteeau'=>1009,'walkingwake'=>1009,'vertdefer'=>1010,'ironleaves'=>1010,'pomdramour'=>1011,'dipplin'=>1011,'poltchageist'=>1012,'theffroyable'=>1013,'sinistcha'=>1013,'felicanis'=>1014,'okidogi'=>1014,'fortusimia'=>1015,'munkidori'=>1015,'favianos'=>1016,'fezandipiti'=>1016,'ogerpon'=>1017,'ogerpon'=>1017,'pondralugon'=>1018,'archaludon'=>1018,'pomdorochi'=>1019,'hydrapple'=>1019,'feuperçant'=>1020,'gougingfire'=>1020,'irefoudre'=>1021,'ragingbolt'=>1021,'rocdefer'=>1022,'ironboulder'=>1022,'chefdefer'=>1023,'ironcrown'=>1023,'terapagos'=>1024,'terapagos'=>1024,'pechaminus'=>1025,'pecharunt'=>1025,  
   ];

    public function __construct(private HttpClientInterface $client, private CacheInterface $cache, private int $pokemonCacheTtl, 
    ) 
    {}

    // Faire les vérifications au niveau du name --> teambuild
    public function pokemonGetSingle(string $name): array
    {
    return $this->cache->get('pokemon_' . strtolower($name), function($item) use ($name){
            try {
                $item->expiresAfter($this->pokemonCacheTtl);
                    
                $pokemonResponse = $this->client->request('GET', 'https://pokeapi.co/api/v2/pokemon/' . ($name));

                $pokemon = $pokemonResponse->toArray();

                $stats = array_map(
                    fn($stat) => [
                        'name' => $stat['stat']['name'],
                        'base_stat' => $stat['base_stat'],
                    ],
                    $pokemon['stats']
                );
                $totalStats = array_sum(array_column($stats, 'base_stat'));

                // Récupération des types
                $types = array_map(fn($type) => $type['type']['name'], $pokemon['types']);

                // Calcul des résistances/faiblesses
                $multipliers = [];
                foreach ($types as $type) {
                    $typeData = $this->client->request('GET', 'https://pokeapi.co/api/v2/type/' . $type)->toArray();
                    $typeRelation = $typeData['damage_relations'];
                    foreach ($typeRelation['double_damage_from'] as $t) {
                        $multipliers[$t['name']] = ($multipliers[$t['name']] ?? 1) * 2;
                    }
                    foreach ($typeRelation['half_damage_from'] as $t) {
                        $multipliers[$t['name']] = ($multipliers[$t['name']] ?? 1) * 0.5;
                    }
                    foreach ($typeRelation['no_damage_from'] as $t) {
                        $multipliers[$t['name']] = ($multipliers[$t['name']] ?? 1) * 0;
                    }
                }
                
                $immunities = $resistances = $strongResistances = $weaknesses = $strongWeaknesses = [];
                foreach ($multipliers as $type => $multiplier) {
                    if ($multiplier == 0) {
                        $immunities[] = $type;
                    } elseif ($multiplier == 0.25) {
                        $strongResistances[] = $type;
                    } elseif ($multiplier == 0.5) {
                        $resistances[] = $type;
                    } elseif ($multiplier == 2) {
                        $weaknesses[] = $type;
                    } elseif ($multiplier == 4) {
                        $strongWeaknesses[] = $type;
                    }
                }

                // $data_talents = $pokemon['abilities'];
                // $talents = [];
                // foreach($data_talents as $talent) {
                //     $ability_data = $this->client->request('GET', $talent['ability']['url'])->toArray();
                //     foreach($ability_data['effect_entries'] as $effect_entry) {
                //         dd($effect_entry);
                //     }
                //     dd($ability_data['effect_entries']);    
                //     $talents[] = $ability_data;
                // }
                // dd($talents);

                $content = [
                    'id' => $pokemon['id'],
                    'sprite' => $pokemon['sprites']['other']['official-artwork']['front_default'],
                    'name' => $pokemon['name'],
                    'height' => $pokemon['height'] * 0.1,
                    'weight' => $pokemon['weight'] * 0.1,
                    'types' => $types,
                    'stats'  => $stats,
                    'stats_total' => $totalStats,   
                    'damage' => [
                        'immunities' => $immunities,
                        'resistances' => $resistances,
                        'strong_resistances' => $strongResistances,
                        'weaknesses' => $weaknesses,
                        'strong_weaknesses' => $strongWeaknesses,
                    ],                  
                ];
                return $content;
            } catch (\Throwable) {
                $item->expiresAfter(0);
                return ['error' => true, 'message' => 'Impossible de récupérer ce Pokémon pour le moment.'];
            }
        });
    }

    public function pokemonGetAll(int $limit, int $offset = 0): array
    {
        return $this->cache->get('pokemon_list_' . $limit . '_' . $offset, function($item) use ($limit, $offset) {
            try {
                $item->expiresAfter($this->pokemonCacheTtl);
                
                $pokemonListResponse = $this->client->request('GET', 'https://pokeapi.co/api/v2/pokemon?limit=' . $limit .'&offset='. $offset);
                $pokemonList = $pokemonListResponse->toArray();

                $pokemonResponses = [];
                
                foreach ($pokemonList['results'] as $pokemon) {
                    $pokemonResponses[] = $this->client->request('GET', 'https://pokeapi.co/api/v2/pokemon/' . $pokemon['name']);
                }   

                $contents = [];
                foreach ($pokemonResponses as $pokemonResponse) {
                    $pokemon = $pokemonResponse->toArray();
                    
                    $contents[] = [
                        'sprite' => $pokemon['sprites']['other']['official-artwork']['front_default'],
                        'name'   => $pokemon['name'],
                        'types'  => array_map(fn($type) => $type['type']['name'], $pokemon['types']),
                    ];
                }
                return $contents;
            } catch (\Throwable) {
                $item->expiresAfter(0);
                return ['error' => true, 'message' => 'Impossible de récupérer les Pokémons pour le moment.'];
            }
        });
    }

    public function nameFrtoEn(string $nameSearch): ?int
    {
        $name = strtolower($nameSearch);
        $accents = ['à','á','â','ã','ä','å','æ','ç','è','é','ê','ë','ì','í','î','ï','ñ','ò','ó','ô','õ','ö','ù','ú','û','ü','ý','ÿ'];
        $sans    = ['a','a','a','a','a','a','ae','c','e','e','e','e','i','i','i','i','n','o','o','o','o','o','u','u','u','u','y','y'];
        $name = str_replace($accents, $sans, $name);
        return $this->map[$name] ?? null;
    }

    public function pokemonStrengthWeakness()
    {

    }
}