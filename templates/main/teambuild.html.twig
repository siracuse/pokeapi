{% extends 'base.html.twig' %}

{% block title %}{{ "Team build"|trans }}{% endblock %}

{% block body %}


	<div class="mt-40 container">
		{{ form_start(form) }}

		{% for i in 1..6 %}
			<div>

				<div class="teambuildForm">
					{{ form_row(attribute(form, 'name' ~ i)) }}
				</div>

				<div class=" mb-20" id="teambuildPokemon-{{ i }}"></div>
			</div>
		{% endfor %}

		{{ form_end(form) }}

		<div class="teambuildPokemonRecap">

		</div>
	</div>

	<script>
		const pokemonUrlTemplate = "{{ path('teambuild_pokemon', {'_locale': app.request.locale,'name': 'POKEMON_NAME'}) }}";

		document.querySelectorAll('.teambuildForm input[type="text"]').forEach((input, index) => {
			input.addEventListener('blur', async function () {
				if (!this.value) return;

				const response = await fetch(pokemonUrlTemplate.replace('POKEMON_NAME', this.value));
				const pokemon = await response.text();

				document.getElementById (`teambuildPokemon-${index + 1}`).innerHTML = pokemon;
			});
		});
	</script>

{% endblock %}
